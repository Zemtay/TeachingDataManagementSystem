# 教学数据智能助手 - 可视化分析与教学改进智能建议系统  
（Teaching Data Management System）

本项目响应国家教育数字化战略，聚焦当前教学数据分析“智能化水平不足、数据交互存在壁垒”核心痛点，基于**若依（RuoYi）框架**构建 Spring Boot (Java) + Vue 前后端分离架构（前期曾探索 Django 框架，后为提升权限管理与业务稳定性，已将核心功能迁移至若依框架），核心适配北京世纪超星信息技术发展有限责任公司（超星学习通）教学数据格式，面向高校教学管理场景，提供“教学数据智能解析-多维度可视化-自然语言交互-智能建议”全流程工具，通过教师/教务双视角分析体系，辅助学情诊断与教学资源优化配置。

---

## 功能概览

- **全流程数据管理**  
  支持 Excel/CSV 格式教学数据上传（适配超星学习通导出数据模板，含课程、班级、学生、互动数据等），自动化清洗（去重、格式标准化、缺失值处理：数字型字段空值补0，非数字型字段保留空值），结构化存储至 MySQL 数据库（支持 PostgreSQL 适配），为后续分析提供高质量数据输入。

- **双视角教学数据分析**  
  - **教师视角**：聚焦学情细节，含学生课堂互动（讨论总数、发帖数、回帖数）统计、任务点完成情况（视频/章节测验/作业/考试）、学业预警（任务完成数排名后五学生标记）、班级学习均衡性分析（基于雷达图展示班级学生任务完成率、课堂投票率、选人选中率评分参与率、问题回答率）；  
  - **教务视角**：掌控全局资源，含教师授课量排名、课程开设规模（班级数量、学生总数）、跨班级/跨课程教学资源分布、全校学生学习行为汇总（章节学习次数、问卷/抢答参与率）。

- **多维度数据可视化**  
  基于 chart.js 实现全场景动态交互式可视化，支持生成适配教学分析的多类型图表：
  - 核心图表类型：教师授课量折线图、课程学生数柱状图、学生成绩散点图、班级学生活动均衡性雷达图、学生任务平均完成情况柱状图；
  - 交互能力：所有图表支持前端缩放，学情分析页面由卡片显示简略信息，点击卡片点查看详细图表显示（如折线图、柱状图、散点图、雷达图），无需切换页面即可完成深度数据探索。

- **AI智能对话助手**  
  集成 **Qwen2.5-7B-Instruct 开源大模型（本地部署）**，通过“意图识别-Text2SQL生成-数据库查询-结果整理”四步流程，实现自然语言交互查询（如“查看工号00007374教师创建的课程”“统计《循证医学》知识图谱课程平均回帖数”）；数据全程本地化存储与处理，无隐私泄露风险，同时支持对话历史管理（默认存储10轮，支持手动删除）。

- **精细化权限与安全防护**  
  支持 **超级管理员/教务/教师三级角色隔离**，权限控制严格匹配业务场景：  
  - 超级管理员：负责用户创建（按工号绑定数据权限）、角色分配（教务/教师）、菜单管理、系统监控（在线用户查看、强制下线）、日志审计；  
  - 教务：全局教学数据访问、数据上传清洗、全校教学统计、数据表增删改（班级/课程/学生/课程活动表）；  
  - 教师：仅访问本人授课班级数据（基于工号行级过滤），仅支持数据查看与学情分析，无修改权限；  
  配套安全机制：BCrypt 算法加密存储用户口令（抵御暴力破解与彩虹表攻击）、SQL注入防护（经 sqlmap 工具扫描验证无注入点）、Web目录安全检测（经 Dirsearch 工具扫描无敏感目录泄露）、操作日志/登录日志全记录（支持按操作人/时间/类型检索审计）。

- **智能报告生成**  
  基于教学数据核心指标（如“创建课程数TOP5教师”“学生数量最多课程”“不同课程的班级数量”），通过提示词工程（角色扮演“教育教学智能助手”）引导大模型，生成多维度诊断报告，包含资源建设活跃度、潜在教学风险点、个性化改进建议（如“高人数课程建议优化教学内容与方法，增加教学资源投入”）。

---

## 技术架构

| 层级         | 技术选型与说明                                                                 |
|--------------|------------------------------------------------------------------------------|
| 核心框架     | 若依（RuoYi）：提供权限管理（RBAC）、会话控制、日志审计、菜单动态渲染基础；Spring Boot（后端业务逻辑）、Vue（前端可视化） |
| 前端技术     | Element UI（组件库）、Chart.js（动态图表）、Axios（异步接口交互）、Vue Router（路由守卫，控制角色页面访问权限） |
| 数据分析     | MySQL数据筛选查询、Matplotlib（静态图表生成）、Chart.js（动态图表生成）、Qwen2.5-7B-Instruct（本地部署大模型，支持意图识别与Text2SQL） |
| 数据存储     | MySQL（核心数据表：CourseInfo课程信息表、ClassInfo班级信息表、Student学生信息表、CourseActivity课程活动表），支持PostgreSQL适配 |
| 安全机制     | BCrypt 口令加密、RBAC 角色权限模型、数据行级过滤（教师仅访问本人授课数据）、SQL注入防护、Web目录安全检测、操作日志审计 |
| 接口风格     | RESTful，支持批量操作、分页查询、复杂条件筛选，全接口详见 [API文档.md](API文档.md)            |

---

## 快速启动

### 1. 环境准备
- 基础环境：JDK 8+/11+、Node.js 14+、MySQL 5.7+/8.0+  

### 2. 后端部署
1. 下载项目源码，配置数据库连接（路径：`ruoyi-admin/src/main/resources/application.yml`），填写MySQL地址、账号、密码；  
2. 执行 SQL 初始化脚本（路径：`sql/teaching_data_init.sql`），创建 CourseInfo/ClassInfo/Student/CourseActivity 核心数据表及若依框架基础表（用户/角色/权限表）；  
3. 启动 Spring Boot 服务：运行 `ruoyi-admin/src/main/java/com/ruoyi/RuoYiApplication.java`，默认端口 `8080`（可在配置文件中修改）。

### 3. 前端部署
1. 进入前端目录 `ruoyi-ui`，执行 `npm install` 安装依赖（若依赖安装失败，可尝试 `npm install --registry=https://registry.npm.taobao.org`）；  
2. 执行 `npm run dev` 启动前端服务，默认访问地址：`http://localhost:80`（可在 `vue.config.js` 中修改端口）。

### 4. 大模型部署
```
export CUDA_VISIBLE_DEVICES=0
python -m vllm.entrypoints.openai.api_server \
 --model path/Qwen2.5-7B-Instruct \
 --served-model-name Qwen2.5-7B-Instruct \
 --port 8001 --api-key 123456
```
### 5. 数据初始化与使用
1. 超级管理员登录（默认账号 `admin`，初始密码 `admin123`）；  
2. 超级管理员创建“教务”“教师”角色并分配权限：教务角色授予“数据上传”“全局数据分析”“数据表管理”权限，教师角色授予“本人课程数据查看”“学情分析”“AI助手”权限；  
3. 教务账号登录，上传超星学习通导出的 Excel/CSV 数据（需包含课程编号、班级ID、学生学号、互动数据等关键字段），系统自动完成数据清洗与存储；  
4. 教师/教务分别通过对应角色入口，查看可视化分析结果、使用 AI 助手查询数据或生成智能报告。

---

## 适用场景

- **高校教师**：学情诊断（识别学习困难学生、定位课堂互动薄弱环节）、教学策略调整（基于任务完成率优化教学节奏）、班级数据可视化导出（用于教学总结）；  
- **高校教务管理者**：全局教学资源监控（教师授课量均衡性、课程学生规模匹配度）、教学质量评估（基于互动率/测验完成率）、校级教学数据审计与智能报告生成（用于教育决策）；  
- **适配超星学习通用户**：可直接导入超星学习通教学数据，无需额外格式转换，快速实现数据可视化与智能化分析。

---

## 主要文件说明

| 目录/文件                | 说明（严格匹配项目实际结构）                                                                 |
|--------------------------|------------------------------------------------------------------------------------------|
| `ruoyi-system/`          | 后端核心业务模块：用户/角色/权限管理逻辑、教学数据实体模型（CourseInfo/ClassInfo/Student/CourseActivity） |
| `ruoyi-admin/`           | 后端接口控制层：数据上传、数据分析、AI助手交互、可视化数据接口等实现                           |
| `ruoyi-ui/`              | 前端可视化页面：登录/角色专属界面（超级管理员系统管理页、教务数据上传页、教师学情分析页）、AI对话窗口、智能报告展示页 |
| `sql/`                   | 数据库初始化脚本：含若依框架基础表（用户/角色/权限）、教学核心数据表结构、超星数据适配字段映射 |
| `API文档.md`             | 接口定义：含数据上传接口、数据分析接口、AI助手接口参数说明及调用示例，标注字段格式要求         |
| `用户使用手册.md`        | 操作指南：超级管理员用户创建流程、教务数据上传步骤、教师学情分析与AI查询示例                   |
| `开发文档.md`            | 技术细节：基于 RuoYi 框架的 Spring Boot+Vue 前后端分离架构说明、核心业务模块（学生 / 课程 / 班级 / 教务活动管理等）设计、数据库表结构（student/course_info 等）、与 RuoYi 框架集成规范及权限控制（Shiro / 注解）实现； |

---

## 项目亮点

1. **政策与实际需求结合**：响应《新一代人工智能发展规划》《教育信息化2.0行动计划》，解决超星学习通等平台数据“分析难、交互繁”问题，命题方与应用场景明确；  
2. **若依框架赋能稳定性**：依托若依框架实现成熟的权限管理（RBAC）、日志审计、会话控制，避免重复开发，保障系统安全性与可维护性；  
3. **本地大模型隐私保护**：采用 Qwen2.5-7B-Instruct 开源大模型本地部署，教学数据（含学生学号、教师工号）全程不对外传输，规避隐私泄露风险；  
4. **低门槛交互设计**：自然语言交互替代传统格式化查询，教师无需掌握SQL或数据分析技能，输入“查看本班任务完成率”即可获取结果，降低使用门槛。

---

## 文档与支持

- [开发文档.md](开发文档.md)：技术细节：基于 RuoYi 框架的 Spring Boot+Vue 前后端分离架构说明、核心业务模块（学生 / 课程 / 班级 / 教务活动管理等）设计、数据库表结构（student/course_info 等）、与 RuoYi 框架集成规范及权限控制（Shiro / 注解）实现；
- [用户使用手册.md](用户使用手册.md)：操作流程：分角色（超级管理员 / 教务 / 教师）权限说明与功能入口（课程管理 / 班级管理 / 学情分析等）、典型使用场景步骤（教师日常教学分析、教务数据管理）、FAQ（如权限问题、学生信息统计用途等）；
- [API文档.md](API文档.md)：接口规范：涵盖用户 / 角色 / 菜单 / 部门及教务业务对象（ClassInfo/CourseInfo/Student 等）的 RESTful 接口说明、数据模型（实体字段）与 API 能力（增删改查 / 统计）、标准响应结构（AjaxResult）及动态 SQL 查询支持。

如需定制开发（如新增教学数据维度、优化大模型对话效果）或功能扩展，可提交 Issue 或联系项目维护者。

---

## License

本项目遵循 Apache License 2.0 开源协议，详见 LICENSE 文件。
